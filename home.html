<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Who Wants to be a Gravilionaire</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600;700&display=swap');
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg,#0a0a0f,#1a0d2e 50%,#2d1b4e 100%); min-height:100vh; overflow-x:hidden; position:relative; }
    .particles{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;}
    .particle{position:absolute;width:2px;height:2px;background:#c084fc;border-radius:50%;box-shadow:0 0 10px #c084fc,0 0 20px #c084fc,0 0 30px #c084fc;animation:float 6s ease-in-out infinite;}
    @keyframes float{0%,100%{transform:translateY(0) rotate(0);opacity:.3;}50%{transform:translateY(-20px) rotate(180deg);opacity:1;}}
    .container{position:relative;z-index:2;max-width:1200px;margin:0 auto;padding:0 20px;}
    .header{display:flex;justify-content:space-between;align-items:center;padding:20px 0;border-bottom:1px solid rgba(192,132,252,.3);box-shadow:0 1px 20px rgba(192,132,252,.1);}
    .logo{font-family:'Orbitron',monospace;font-size:24px;font-weight:700;color:#c084fc;text-shadow:0 0 20px rgba(192,132,252,.8),0 0 40px rgba(192,132,252,.4);}
    .wallet-container{position:relative; margin-right: 20px;} /* Added margin */
    .connect-wallet-btn{background:linear-gradient(45deg,#8b5cf6,#a78bfa);color:#fff;border:2px solid rgba(192,132,252,.5);padding:12px 24px;border-radius:50px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px rgba(139,92,246,.4),0 0 20px rgba(192,132,252,.2);}
    .connect-wallet-btn:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(139,92,246,.6),0 0 30px rgba(192,132,252,.4);border-color:rgba(192,132,252,.8);}
    .dropdown{display:none;position:absolute;right:0;margin-top:10px;background:#1a0d2e;border:1px solid rgba(192,132,252,.4);border-radius:10px;box-shadow:0 5px 20px rgba(139,92,246,.3);overflow:hidden;z-index:10;width: 180px;}
    .dropdown a{display:block;padding:10px 20px;color:#fff;text-decoration:none;transition:.2s;}
    .dropdown a:hover{background:rgba(192,132,252,.2);}
    .wallet-container.active .dropdown{display:block;}
    .hero{text-align:center;padding:80px 0;}
    .hero h1{font-family:'Orbitron',monospace;font-size:clamp(3rem,8vw,6rem);font-weight:900;background:linear-gradient(45deg,#c084fc,#fff,#a78bfa,#c084fc);background-size:200% 200%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:shimmer 3s ease-in-out infinite;margin-bottom:20px;text-shadow:0 0 50px rgba(192,132,252,.6);filter:drop-shadow(0 0 20px rgba(192,132,252,.4));}
    @keyframes shimmer{0%,100%{background-position:0% 50%;}50%{background-position:100% 50%;}}
    .hero h2{font-size:clamp(1.5rem,4vw,2.5rem);color:#fff;margin-bottom:30px;font-weight:300;opacity:.9;}
    .hero p{font-size:1.2rem;color:#b8b8d1;max-width:600px;margin:0 auto 50px;line-height:1.6;}
    .cta-buttons{display:flex;gap:20px;justify-content:center;flex-wrap:wrap;}
    .play-btn{background:linear-gradient(45deg,#8b5cf6,#a78bfa);color:white;border:2px solid rgba(192,132,252,.6);padding:18px 40px;border-radius:50px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:.3s;box-shadow:0 6px 20px rgba(139,92,246,.4),0 0 25px rgba(192,132,252,.3);}
    .play-btn:hover{transform:translateY(-3px);box-shadow:0 10px 30px rgba(139,92,246,.6),0 0 40px rgba(192,132,252,.5);border-color:rgba(192,132,252,.9);}
  </style>
</head>
<body>
  <div class="particles" id="particles"></div>

  <div class="container">
    <header class="header">
      <div class="logo">GRAVILIONAIRE</div>
      <div class="wallet-container" id="walletContainer">
        <button class="connect-wallet-btn" id="connectWalletBtn">Connect Wallet</button>
        <div class="dropdown" id="walletDropdown">
          <a href="/profile">Profile</a>
          <a href="/faucet">Faucet</a>
          <a href="/leaderboard">Leaderboard</a>
          <a href="#" id="disconnectBtn">Disconnect</a>
        </div>
      </div>
    </header>

    <section class="hero">
      <h1>WHO WANTS TO BE A</h1>
      <h2>GRAVILIONAIRE?</h2>
      <p>
        Test your knowledge, earn crypto rewards, and climb the ladder to become the
        ultimate Gravilionaire. Connect your wallet and start your journey to digital
        riches!
      </p>

      <div class="cta-buttons">
        <button class="play-btn" id="startGameBtn">Start Playing</button>
      </div>
    </section>
  </div>

  <!-- Load scripts only once at the bottom -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script>
    // Create particles background
    function createParticles() {
      const container = document.getElementById('particles');
      if (!container) return;
      
      for (let i = 0; i < 50; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 5 + 's';
        particle.style.animationDuration = (3 + Math.random() * 5) + 's';
        container.appendChild(particle);
      }
    }

    // Wallet connection and dropdown functionality
    document.addEventListener('DOMContentLoaded', function() {
      createParticles();
      
      const walletContainer = document.getElementById('walletContainer');
      const connectBtn = document.getElementById('connectWalletBtn');
      const dropdown = document.getElementById('walletDropdown');
      const disconnectBtn = document.getElementById('disconnectBtn');
      const startGameBtn = document.getElementById('startGameBtn');
      
      // Check if wallet is already connected
      const savedWallet = localStorage.getItem('wallet');
      if (savedWallet) {
        updateWalletButton(savedWallet);
      }
      
      // Toggle dropdown
      connectBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        
        // If not connected, connect wallet
        if (!savedWallet) {
          connectWallet();
          return;
        }
        
        // If connected, toggle dropdown
        walletContainer.classList.toggle('active');
      });
      
      // Close dropdown when clicking outside
      document.addEventListener('click', function(e) {
        if (!walletContainer.contains(e.target)) {
          walletContainer.classList.remove('active');
        }
      });
      
      // Disconnect wallet
      disconnectBtn.addEventListener('click', function(e) {
        e.preventDefault();
        localStorage.removeItem('wallet');
        walletContainer.classList.remove('active');
        connectBtn.textContent = 'Connect Wallet';
        alert('Wallet disconnected');
      });
      
      // Start game button
      startGameBtn.addEventListener('click', function() {
        const wallet = localStorage.getItem('wallet');
        if (!wallet) {
          alert('Please connect your wallet first!');
          return;
        }
        window.location.href = '/paystart';
      });
      
      // Connect wallet function
      async function connectWallet() {
        try {
          if (typeof window.ethereum === 'undefined') {
            alert('Please install MetaMask or another Ethereum wallet!');
            return;
          }
          
          // Request account access
          const accounts = await window.ethereum.request({ 
            method: 'eth_requestAccounts' 
          });
          
          if (accounts.length > 0) {
            const walletAddress = accounts[0];
            localStorage.setItem('wallet', walletAddress);
            updateWalletButton(walletAddress);
            alert('Wallet connected successfully!');
          }
        } catch (error) {
          console.error('Error connecting wallet:', error);
          alert('Failed to connect wallet: ' + error.message);
        }
      }
      
      // Update wallet button with truncated address
      function updateWalletButton(address) {
        const truncated = `${address.substring(0, 6)}...${address.substring(address.length - 4)}`;
        connectBtn.textContent = `âœ… ${truncated}`;
      }
    });
  </script>
</body>
</html>